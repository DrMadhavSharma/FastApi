<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Monthly Activity Report</title>
</head>

<body style="margin:0; padding:0; background-color:#f2f2f2; font-family:Arial, Helvetica, sans-serif;">

<table width="100%" cellpadding="0" cellspacing="0" style="padding:20px; background-color:#f2f2f2;">
<tr>
<td align="center">

<!-- Main Card -->
<table width="600" cellpadding="0" cellspacing="0" style="background-color:#ffffff; border-radius:6px; padding:20px;">

<!-- Logo -->
<tr>
<td align="center" style="padding-bottom:15px;">
    <img src="https://fastapi-6mjn.onrender.com/static/logo.png"
         alt="Company Logo"
         width="140"
         style="display:block;">
</td>
</tr>

<!-- Header -->
<tr>
<td align="center" style="font-size:24px; font-weight:bold; color:#222; padding-bottom:10px;">
    Monthly Activity Report – {{ month }} {{ year }}
</td>
</tr>

<!-- Greeting -->
<tr>
<td style="padding-top:10px; font-size:17px; color:#333;">
    Hello <strong>Dr. {{ doctor_name }}</strong>,
</td>
</tr>

<tr>
<td style="font-size:14px; color:#555; padding-bottom:15px;">
    Below is a summary of your patient appointments for this month.
</td>
</tr>

<!-- Summary -->
<tr>
<td style="padding-bottom:15px; font-size:15px;">
    <strong>Total Appointments:</strong> {{ appointments|length }}
</td>
</tr>

<!-- Table -->
<tr>
<td>
<table width="100%" cellpadding="8" cellspacing="0" style="border-collapse:collapse; font-size:13px;">

<tr style="background-color:#343a40; color:#ffffff;">
    <th align="left">#</th>
    <th align="left">Patient</th>
    <th align="left">Date</th>
    <th align="left">Notes</th>
</tr>

{% for a in appointments %}
<tr style="background-color:#f9f9f9;">
    <td>{{ loop.index }}</td>
    <td>{{ a.patient.user.username }}</td>
    <td>{{ a.appointment_date }}</td>
    <td>
{% if a.notes %}
Diagnosis: {{ a.notes.diagnosis }}<br>
Treatment: {{ a.notes.treatment }}<br>
Prescriptions: {{ a.notes.prescriptions or "-" }}
{% else %}
-
{% endif %}
</td>
</tr>
{% endfor %}

{% if appointments|length == 0 %}
<tr>
    <td colspan="4" align="center" style="padding:15px; color:#777;">
        No appointments recorded for this month.
    </td>
</tr>
{% endif %}

</table>
</td>
</tr>

<!-- Footer Message -->
<tr>
<td style="font-size:14px; color:#333; padding-top:15px;">
    This report was generated automatically for your records.
</td>
</tr>

<!-- Stamp -->
<tr>
<td align="right" style="padding-top:20px;">
    <img src="https://fastapi-6mjn.onrender.com/static/stamp.png"
         alt="Official Stamp"
         width="90"
         style="display:block;">
</td>
</tr>

<!-- Footer -->
<tr>
<td align="center" style="font-size:11px; color:#777; padding-top:15px;">
    © {{ year }} ArogyaSys <br>
    Automated report · Generated on {{ generated_on }}
</td>
</tr>

</table>
<!-- End Card -->

</td>
</tr>
</table>

</body>
</html>
